<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>My GitHub Projects</title>

<!-- Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

<style>
  body {
    font-family: Arial, sans-serif;
    min-height: 100vh;
    margin:0;
    background: linear-gradient(135deg, #f8f9fa, #e9ecef);
    transition: background 0.3s, color 0.3s;
    overflow-x: hidden;
  }

  h1 {
    font-weight: 700;
    font-size: 3rem;
    margin-bottom: 2rem;
    opacity: 0;
    transform: translateY(-20px);
    animation: fadeDown 0.8s forwards;
  }
  @keyframes fadeDown { to { opacity:1; transform: translateY(0);} }

  .fade-in { opacity: 0; transform: translateY(15px); animation: fadeInUp 0.6s ease forwards; }
  @keyframes fadeInUp { to { opacity: 1; transform: translateY(0); } }

  /* Card hover */
  .card { transition: transform 0.3s ease, box-shadow 0.3s ease; }
  .card:hover { transform: translateY(-8px) rotateZ(0.5deg) scale(1.03); box-shadow: 0 15px 25px rgba(0,0,0,0.25); }

  /* Gradient buttons */
  .btn-gradient { background: linear-gradient(90deg, #6a11cb, #2575fc); color: #fff; transition: background 0.3s; }
  .btn-gradient:hover { background: linear-gradient(90deg, #2575fc, #6a11cb); color: #fff; }

  /* Language badges */
  .badge-lang { font-size: 0.7rem; padding: 0.3em 0.5em; margin-right: 0.3rem; border-radius: 0.25rem; color: #fff; }
  .badge-JavaScript { background-color: #f7df1e; color: #000; }
  .badge-Python { background-color: #3572A5; }
  .badge-HTML { background-color: #e34c26; }
  .badge-CSS { background-color: #264de4; }
  .badge-Other { background-color: #6c757d; }

  /* Dark Mode */
  body.dark-mode { background:#000; color:#fff; }
  body.dark-mode .navbar { background:#111 !important; }
  body.dark-mode .navbar .navbar-brand, body.dark-mode .navbar .btn { color:#fff !important; }
  body.dark-mode .bg-body { background:#111 !important; }
  body.dark-mode .card { background:#111; color:#fff; }
  body.dark-mode .card .text-muted { color:#ccc; }
  body.dark-mode select, body.dark-mode input { background:#222; color:#fff; border-color:#444; }

  /* Skeleton loader cards */
  .skeleton-card { height: 180px; border-radius: .5rem; background: linear-gradient(-90deg, #eee 0%, #ddd 50%, #eee 100%); background-size: 400% 400%; animation: pulse 1.2s ease-in-out infinite; }
  body.dark-mode .skeleton-card { background: linear-gradient(-90deg, #222 0%, #333 50%, #222 100%); }
  @keyframes pulse { 0% { background-position: 100% 0; } 100% { background-position: -100% 0; } }

  /* Back to Top */
  #backToTop { position: fixed; bottom:30px; right:30px; display:none; z-index:1500; border-radius:50%; width:50px; height:50px; font-size:1.5rem; justify-content:center; align-items:center; }

</style>
</head>
<body>

<!-- Navbar -->
<nav class="navbar navbar-expand-lg bg-light shadow-sm sticky-top">
  <div class="container">
    <a class="navbar-brand fw-bold" href="#">üöÄ My GitHub Projects</a>
    <button id="darkModeToggle" class="btn btn-outline-dark"><i class="bi bi-moon-fill"></i></button>
  </div>
</nav>

<div class="container py-4">
  <h1>My GitHub Projects</h1>

  <!-- Filters -->
  <div class="row mb-4 g-2 sticky-top bg-body py-3 shadow-sm rounded">
    <div class="col-md-5"><input type="text" id="search" class="form-control" placeholder="üîç Search repositories..."></div>
    <div class="col-md-4"><select id="languageFilter" class="form-select"><option value="">üåê All Languages</option></select></div>
    <div class="col-md-3"><select id="sortFilter" class="form-select">
      <option value="updated">üìÖ Last Updated</option>
      <option value="stars">‚≠ê Stars</option>
      <option value="forks">üç¥ Forks</option>
      <option value="name">üî§ Name</option>
    </select></div>
  </div>

  <!-- Repo list -->
  <div id="repo-list" class="row g-4 mt-3">
    <!-- Skeleton cards while loading -->
    <div class="col-md-6 col-lg-4"><div class="skeleton-card"></div></div>
    <div class="col-md-6 col-lg-4"><div class="skeleton-card"></div></div>
    <div class="col-md-6 col-lg-4"><div class="skeleton-card"></div></div>
    <div class="col-md-6 col-lg-4"><div class="skeleton-card"></div></div>
    <div class="col-md-6 col-lg-4"><div class="skeleton-card"></div></div>
  </div>
</div>

<!-- Back to Top Button -->
<button id="backToTop" class="btn btn-primary d-flex"><i class="bi bi-arrow-up"></i></button>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
const username = "thingumicu";
const repoList = document.getElementById("repo-list");
const searchInput = document.getElementById("search");
const languageFilter = document.getElementById("languageFilter");
const sortFilter = document.getElementById("sortFilter");
const darkModeToggle = document.getElementById("darkModeToggle");
const backToTop = document.getElementById("backToTop");

let allRepos = [];

// --- Dark Mode ---
function setDarkMode(enabled){
  if(enabled){
    document.body.classList.add("dark-mode");
    darkModeToggle.innerHTML='<i class="bi bi-sun-fill"></i>';
    darkModeToggle.classList.remove("btn-outline-dark");
    darkModeToggle.classList.add("btn-outline-light");
    localStorage.setItem("darkMode","true");
  } else {
    document.body.classList.remove("dark-mode");
    darkModeToggle.innerHTML='<i class="bi bi-moon-fill"></i>';
    darkModeToggle.classList.remove("btn-outline-light");
    darkModeToggle.classList.add("btn-outline-dark");
    localStorage.setItem("darkMode","false");
  }
}
if(localStorage.getItem("darkMode")==="true") setDarkMode(true);
else if(localStorage.getItem("darkMode")==="false") setDarkMode(false);
else if(window.matchMedia("(prefers-color-scheme: dark)").matches) setDarkMode(true);
darkModeToggle.addEventListener("click",()=>setDarkMode(!document.body.classList.contains("dark-mode")));

// --- Fetch repos ---
fetch(`https://api.github.com/users/${username}/repos?sort=updated&per_page=100`)
.then(r=>r.json())
.then(data=>{
  allRepos=data;
  populateLanguageFilter(data);
  displayRepos(data);
})
.catch(err=>{
  repoList.innerHTML=`<p class="text-danger">‚ö† Failed to load repositories.</p>`;
  console.error(err);
});

// Populate language filter
function populateLanguageFilter(repos){
  const languages=[...new Set(repos.map(r=>r.language).filter(Boolean))].sort();
  languages.forEach(lang=>{
    const opt=document.createElement("option");
    opt.value=lang; opt.textContent=lang;
    languageFilter.appendChild(opt);
  });
}

// Display repos
function displayRepos(repos){
  repoList.innerHTML="";
  repos.forEach((repo,index)=>{
    const col=document.createElement("div");
    col.className="col-md-6 col-lg-4 fade-in";
    col.style.animationDelay=`${index*0.05}s`;

    const updated=new Date(repo.updated_at).toLocaleDateString();
    const langClass=repo.language?`badge-${repo.language.replace(/\W/g,'')}`:"badge-Other";
    const langBadge=`<span class="badge badge-lang ${langClass}">${repo.language||"N/A"}</span>`;

    // Highlight search
    let nameHighlight=repo.name;
    const q=searchInput.value.toLowerCase();
    if(q && repo.name.toLowerCase().includes(q)){
      const regex=new RegExp(q,"ig");
      nameHighlight=repo.name.replace(regex,m=>`<span class="highlight">${m}</span>`);
    }

    col.innerHTML=`
      <div class="card shadow-sm h-100">
        <div class="card-body d-flex flex-column">
          <h5 class="card-title"><i class="bi bi-folder2 me-2 text-primary"></i>${nameHighlight}</h5>
          <p class="card-text text-muted small">${repo.description||"No description available."}</p>
          <div class="mb-2">${langBadge}</div>
          <ul class="list-inline text-muted small mb-3">
            <li class="list-inline-item"><i class="bi bi-star-fill text-warning"></i> ${repo.stargazers_count}</li>
            <li class="list-inline-item"><i class="bi bi-git text-danger"></i> ${repo.forks_count}</li>
            <li class="list-inline-item"><i class="bi bi-eye text-info"></i> ${repo.watchers_count}</li>
            <li class="list-inline-item"><i class="bi bi-clock"></i> Updated: ${updated}</li>
          </ul>
          <a href="${repo.html_url}" target="_blank" class="btn btn-gradient mt-auto" title="View on GitHub"><i class="bi bi-github me-2"></i>GitHub</a>
        </div>
      </div>`;
    repoList.appendChild(col);
  });
}

// Filter
function filterRepos(){
  const q=searchInput.value.toLowerCase();
  const lang=languageFilter.value;
  let filtered=allRepos.filter(r=>r.name.toLowerCase().includes(q)&&(lang===""||r.language===lang));
  if(sortFilter.value==="stars") filtered.sort((a,b)=>b.stargazers_count-a.stargazers_count);
  else if(sortFilter.value==="forks") filtered.sort((a,b)=>b.forks_count-a.forks_count);
  else if(sortFilter.value==="name") filtered.sort((a,b)=>a.name.localeCompare(b.name));
  else filtered.sort((a,b)=>new Date(b.updated_at)-new Date(a.updated_at));
  displayRepos(filtered);
}
searchInput.addEventListener("input", filterRepos);
languageFilter.addEventListener("change", filterRepos);
sortFilter.addEventListener("change", filterRepos);

// Back to Top
window.addEventListener("scroll",()=>{backToTop.style.display=window.scrollY>300?"flex":"none";});
backToTop.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"});});
</script>

</body>
</html>
